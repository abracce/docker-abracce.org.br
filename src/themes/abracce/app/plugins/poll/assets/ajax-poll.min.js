!function(a){var b=".poll-form",c=".poll-results";a(".poll-btn-results").on("click",function(d){d.preventDefault();var e=a(this).parent().parent(),f=e.data("id");kr_poll_results.refresh(f),a("#poll-"+f).find(b).hide(),a("#poll-"+f).find(c).fadeIn()}),a(".poll-btn-back").on("click",function(d){d.preventDefault();var e=a(this).parent().parent(),f=e.data("id"),g=e.find(".progress-bar");a("#poll-"+f).find(c).hide(),a("#poll-"+f).find(b).fadeIn(),g.css({width:0})}),a(".poll-btn-vote").on("click",function(b){b.preventDefault();var c=a(this).parent().parent(),d=c.find('input[type="radio"]:checked').val(),e=c.data("id"),f={action:"KRAjaxPollSaveVote",option_id:d,question_id:e};a.ajax({type:"POST",url:wpAjax.ajaxurl,dataType:"json",data:f,success:function(b){"success"==b.typ?a("#poll-"+e).find(".poll-alert").addClass("alert-info").fadeIn().html(b.html):a("#poll-"+e).find(".poll-alert").addClass("alert-danger").fadeIn().html(b.html)},error:function(b){console.log(b.responseText),a("#poll-"+e).find("poll-alert").addClass("alert-danger").fadeIn().html(b.responseText)}})}),kr_poll_results={refresh:function(b){var c={action:"KRAjaxPollVoteResults",question_id:b};a.ajax({type:"POST",url:wpAjax.ajaxurl,dataType:"json",data:c,success:function(c){a("#poll-"+b).find(".poll-results").html(c.html),kr_poll_results.animate(b)},error:function(a){console.log(a.responseText)}})},animate:function(b){a("#poll-"+b+" .progress").each(function(){var b=a(this).find(".progress-bar");progress_value=b.data("value"),b.css({width:0}),b.animate({width:progress_value+"%"},400)})}}}(jQuery);